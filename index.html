<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dead Simple Time Zone Converter (UTC Input)</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a cleaner look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        /* Style for the button */
        #convert-btn {
            transition: all 0.2s;
        }
        #convert-btn:hover {
            box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.5), 0 2px 4px -2px rgba(99, 102, 241, 0.5);
        }
        .input-field {
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .input-field:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-xl bg-white shadow-2xl rounded-xl p-8 space-y-8 border border-gray-100">
        
        <!-- Header -->
        <header class="text-center space-y-2">
            <h1 class="text-3xl font-extrabold text-gray-800">UTC to Time Zone Converter</h1>
            <p class="text-lg text-gray-500">Enter a UTC time and see the time in your chosen zone.</p>
        </header>

        <!-- Input Form Section -->
        <section class="space-y-4">
            <div class="space-y-2">
                <label for="input-time" class="block text-sm font-medium text-gray-700">1. Enter Time in UTC (Format: H:MM AM/PM or HH:MM 24h)</label>
                <div class="flex space-x-2">
                    <!-- Time Input -->
                    <input type="text" id="input-time" placeholder="e.g., 2:30 PM or 14:30" class="input-field w-3/4 p-3 border border-gray-300 rounded-lg font-mono">
                    <!-- AM/PM Selector -->
                    <select id="am-pm-select" class="input-field w-1/4 p-3 border border-gray-300 rounded-lg">
                        <option value="AM">AM</option>
                        <option value="PM">PM</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label for="input-timezone" class="block text-sm font-medium text-gray-700">2. Select Target Time Zone</label>
                <select id="input-timezone" class="input-field w-full p-3 border border-gray-300 rounded-lg">
                    <option value="America/Chicago" selected>Central Time (CT / CST/CDT)</option>
                    <option value="America/New_York">Eastern Time (ET / EST/EDT)</option>
                    <option value="America/Los_Angeles">Pacific Time (PT / PST/PDT)</option>
                    <option value="Europe/London">London (GMT/BST)</option>
                    <option value="Europe/Berlin">Central European Time (CET/CEST)</option>
                    <option value="Asia/Shanghai">China Standard Time (CST)</option>
                    <option value="Asia/Tokyo">Japan Standard Time (JST)</option>
                    <option value="Australia/Sydney">Sydney (AEST/AEDT)</option>
                    <option value="UTC">UTC (Coordinated Universal Time)</option>
                </select>
            </div>

            <button id="convert-btn" class="w-full py-3 px-4 bg-indigo-600 text-white font-bold rounded-lg shadow-lg focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50">
                Convert Time
            </button>
        </section>
        
        <!-- Output Display Area -->
        <div id="output-area" class="space-y-4 pt-6 hidden">
             <h2 class="text-xl font-semibold text-gray-700 border-b pb-2">Conversion Results (Based on Current Date)</h2>
             <p id="error-message" class="text-red-600 font-medium hidden p-2 bg-red-50 rounded-lg border border-red-300">
                 <!-- Error message will appear here -->
             </p>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-center">
                
                <!-- UTC Input Card -->
                <div class="bg-gray-50 p-6 rounded-lg shadow-inner border">
                    <p id="utc-label" class="text-sm font-semibold text-gray-500 mb-2">Input UTC Time</p>
                    <p id="utc-output-time" class="text-3xl font-mono font-bold text-gray-700">--:--</p>
                    <p id="utc-output-date" class="text-sm text-gray-400 mt-1"></p>
                </div>

                <!-- Target Time Card -->
                <div class="bg-indigo-50 p-6 rounded-lg shadow-md border-2 border-indigo-200">
                    <p id="target-label" class="text-sm font-semibold text-indigo-700 mb-2">Converted Time</p>
                    <p id="source-time" class="text-3xl font-mono font-bold text-indigo-800">--:--</p>
                    <p id="source-date" class="text-sm text-indigo-500 mt-1"></p>
                </div>
            </div>
        </div>

    </div>

    <script>
        // IIFE for scope isolation
        (function() {
            // Updated element selectors
            const inputTimeEl = document.getElementById('input-time');
            const amPmSelectEl = document.getElementById('am-pm-select');
            const inputTimezoneEl = document.getElementById('input-timezone');
            const convertBtn = document.getElementById('convert-btn');
            const outputAreaEl = document.getElementById('output-area');
            const errorMessageEl = document.getElementById('error-message');
            
            // Output element selectors
            const utcInputTimeEl = document.getElementById('utc-output-time');
            const utcInputDateEl = document.getElementById('utc-output-date');
            const targetTimeEl = document.getElementById('source-time');
            const targetDateEl = document.getElementById('source-date');
            const targetLabelEl = document.getElementById('target-label');

            // --- Formatting Options ---
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hourCycle: 'h12' // 12-hour clock
            };

            const dateOptions = {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            };


            /**
             * Converts the input UTC time (12-hour + AM/PM OR 24-hour) to the selected target timezone.
             */
            function convertTime() {
                const inputTimeString = inputTimeEl.value.trim();
                const amPm = amPmSelectEl.value;
                const targetTimeZone = inputTimezoneEl.value;
                
                // 1. Clear previous results and errors
                outputAreaEl.classList.add('hidden');
                errorMessageEl.classList.add('hidden');
                errorMessageEl.textContent = '';

                try {
                    // Extract only hour and minute components (allow 1 or 2 digits for hour)
                    const parts = inputTimeString.match(/(\d{1,2}):(\d{2})/);
                    if (!parts) {
                        throw new Error("Invalid time format. Use H:MM, e.g., 8:30 or 14:00.");
                    }
                    // Destructure and convert to numbers.
                    let hour = Number(parts[1]);
                    let minute = Number(parts[2]);
                    
                    // Input variables for the conversion logic
                    let hour24;
                    let displayTime; 

                    // 2. Validate and Determine 24-hour format (0-23)
                    if (minute < 0 || minute > 59) {
                        throw new Error("Minute must be 00-59.");
                    }

                    if (hour >= 13 && hour <= 23) {
                        // Case A: 24-hour time (Military) input, e.g., 14:30
                        hour24 = hour;
                        displayTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')} (24h)`;

                    } else if (hour >= 0 && hour <= 12) {
                        // Case B: 12-hour time input, use the AM/PM selector
                        
                        if (hour === 0 && amPm === 'AM') {
                            throw new Error("Invalid 12-hour format. Hour must be 1-12. Did you mean 12:XX AM?");
                        }
                        
                        hour24 = hour;
                        
                        if (amPm === 'PM' && hour !== 12) {
                            hour24 += 12; // 1 PM -> 13, 11 PM -> 23
                        } else if (amPm === 'AM' && hour === 12) {
                            hour24 = 0; // 12 AM (midnight) -> 0
                        }
                        
                        // For display, use the user's 12-hour input style
                        displayTime = `${hour}:${minute.toString().padStart(2, '0')} ${amPm}`;

                    } else {
                        throw new Error("Hour must be between 0-23.");
                    }


                    // 3. Establish the UTC moment for today based on user input HH:MM
                    const now = new Date();
                    
                    // Create a date object representing the input time (24-hour 'hour24', 'minute') at today's date, 
                    // with the time component interpreted as UTC.
                    const utcMoment = new Date(Date.UTC(
                        now.getUTCFullYear(), 
                        now.getUTCMonth(), 
                        now.getUTCDate(), 
                        hour24, 
                        minute, 
                        0
                    ));
                    
                    if (isNaN(utcMoment.getTime())) {
                         throw new Error("An internal error occurred creating the date object.");
                    }
                    
                    // --- 4. Display Results ---
                    
                    // Output formatters for the Target Zone
                    const targetTimeFormatter = new Intl.DateTimeFormat('en-US', { ...timeOptions, timeZone: targetTimeZone });
                    const targetDateFormatter = new Intl.DateTimeFormat('en-US', { ...dateOptions, timeZone: targetTimeZone });
                    
                    // UTC Input Display (Show the derived input style)
                    utcInputTimeEl.textContent = displayTime;
                    utcInputDateEl.textContent = targetDateFormatter.format(now); // Show the date used as context (today)

                    // Target Output Display (The converted time and potentially new date)
                    targetTimeEl.textContent = targetTimeFormatter.format(utcMoment);
                    targetDateEl.textContent = targetDateFormatter.format(utcMoment);
                    
                    // Update the target label to include the selected zone name
                    const selectedOptionText = inputTimezoneEl.options[inputTimezoneEl.selectedIndex].text;
                    targetLabelEl.textContent = selectedOptionText;

                    outputAreaEl.classList.remove('hidden');

                } catch (e) {
                    errorMessageEl.textContent = `Conversion Failed: ${e.message}`;
                    errorMessageEl.classList.remove('hidden');
                }
            }
            
            // Set default time to current UTC time (in 12-hour format)
            const nowUtc = new Date();
            let currentUtcHour24 = nowUtc.getUTCHours();
            const currentUtcMinute = String(nowUtc.getUTCMinutes()).padStart(2, '0');

            let defaultAmPm = currentUtcHour24 >= 12 ? 'PM' : 'AM';
            let defaultHour12 = currentUtcHour24 % 12;
            if (defaultHour12 === 0) {
                defaultHour12 = 12; // 00:xx and 12:xx should display as 12 in 12-hour clock
            }

            // Set the default values in the input fields
            inputTimeEl.value = `${defaultHour12}:${currentUtcMinute}`;
            amPmSelectEl.value = defaultAmPm;
            
            // Attach event listener to button
            convertBtn.addEventListener('click', convertTime);

            // Run conversion on load with default value
            convertTime();
            
        })();
    </script>
</body>
</html>